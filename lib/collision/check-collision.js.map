{"version":3,"file":"check-collision.js","sourceRoot":"","sources":["../../src/collision/check-collision.ts"],"names":[],"mappings":"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","sourcesContent":["import { WorldTransform } from '../node/core/transform'\nimport { CircleCollider, Collider, ColliderType, EllipseCollider, PolygonCollider, RectangleCollider } from './colliders'\n\n// =====================================================================================\n// Utilities (scalar-only, no allocations at runtime)\n// =====================================================================================\n\nconst abs = (v: number) => (v < 0 ? -v : v)\n\n// =====================================================================================\n// OBB helpers (scalar-only)\n// =====================================================================================\n\nfunction obbRadiusOnAxis(\n  Lx: number, Ly: number,\n  ux: number, uy: number, vx: number, vy: number, hx: number, hy: number\n) {\n  // hx, hy must be >= 0; project axis onto OBB's local axes and scale by half extents.\n  const Lu = Lx * ux + Ly * uy\n  const Lv = Lx * vx + Ly * vy\n  const a = hx * (Lu < 0 ? -Lu : Lu)\n  const b = hy * (Lv < 0 ? -Lv : Lv)\n  return a + b\n}\n\nfunction axisSeparates(\n  Lx: number, Ly: number, dx: number, dy: number,\n  aux: number, auy: number, avx: number, avy: number, ahx: number, ahy: number,\n  bux: number, buy: number, bvx: number, bvy: number, bhx: number, bhy: number\n) {\n  const dist = dx * Lx + dy * Ly\n  const ad = dist < 0 ? -dist : dist\n  const rA = obbRadiusOnAxis(Lx, Ly, aux, auy, avx, avy, ahx, ahy)\n  const rB = obbRadiusOnAxis(Lx, Ly, bux, buy, bvx, bvy, bhx, bhy)\n  return ad > (rA + rB)\n}\n\n// =====================================================================================\n// Rectangle–Rectangle (OBB–OBB) — SAT with 4 axes (no allocations)\n// =====================================================================================\n\nfunction checkRectRectCollision(\n  ca: RectangleCollider, ta: WorldTransform,\n  cb: RectangleCollider, tb: WorldTransform\n): boolean {\n  // A frame (half extents must be non-negative)\n  const asx = ta.scaleX.v, asy = ta.scaleY.v\n  const ahx = abs(ca.width * asx) * 0.5\n  const ahy = abs(ca.height * asy) * 0.5\n  const cA = ta.rotation.cos, sA = ta.rotation.sin\n  const aux = cA, auy = sA\n  const avx = -sA, avy = cA\n  // apply rotated local offset for center\n  const aox = (ca.x || 0) * asx\n  const aoy = (ca.y || 0) * asy\n  const ax = ta.x.v + aux * aox + avx * aoy\n  const ay = ta.y.v + auy * aox + avy * aoy\n\n  // B frame\n  const bsx = tb.scaleX.v, bsy = tb.scaleY.v\n  const bhx = abs(cb.width * bsx) * 0.5\n  const bhy = abs(cb.height * bsy) * 0.5\n  const cB = tb.rotation.cos, sB = tb.rotation.sin\n  const bux = cB, buy = sB\n  const bvx = -sB, bvy = cB\n  const box = (cb.x || 0) * bsx\n  const boy = (cb.y || 0) * bsy\n  const bx = tb.x.v + bux * box + bvx * boy\n  const by = tb.y.v + buy * box + bvy * boy\n\n  // Fast axis-aligned branch if both rotations are zero\n  const rotA = ta.rotation.v, rotB = tb.rotation.v\n  if ((rotA === 0 || rotA === 0.0) && (rotB === 0 || rotB === 0.0)) {\n    const dx0 = bx - ax; const adx0 = dx0 < 0 ? -dx0 : dx0\n    const dy0 = by - ay; const ady0 = dy0 < 0 ? -dy0 : dy0\n    return (adx0 <= ahx + bhx) && (ady0 <= ahy + bhy)\n  }\n\n  const dx = bx - ax\n  const dy = by - ay\n\n  if (axisSeparates(aux, auy, dx, dy, aux, auy, avx, avy, ahx, ahy, bux, buy, bvx, bvy, bhx, bhy)) return false\n  if (axisSeparates(avx, avy, dx, dy, aux, auy, avx, avy, ahx, ahy, bux, buy, bvx, bvy, bhx, bhy)) return false\n  if (axisSeparates(bux, buy, dx, dy, aux, auy, avx, avy, ahx, ahy, bux, buy, bvx, bvy, bhx, bhy)) return false\n  if (axisSeparates(bvx, bvy, dx, dy, aux, auy, avx, avy, ahx, ahy, bux, buy, bvx, bvy, bhx, bhy)) return false\n\n  return true\n}\n\n// =====================================================================================\n// Circle tools (no allocations)\n// =====================================================================================\n\n// scratch for circle center computations (reused everywhere; no runtime object creation)\nlet _ccx = 0, _ccy = 0\n\n// Writes the world-space center into (_ccx, _ccy).\nfunction circleCenterScratch(c: CircleCollider, t: WorldTransform): void {\n  // No object/array allocation; scalar math only\n  const sx = t.scaleX.v, sy = t.scaleY.v\n  const cos = t.rotation.cos, sin = t.rotation.sin\n  // local axes\n  const ux = cos, uy = sin\n  const vx = -sin, vy = cos\n  // scaled local offset\n  const ox = (c.x || 0) * sx\n  const oy = (c.y || 0) * sy\n  _ccx = t.x.v + ux * ox + vx * oy\n  _ccy = t.y.v + uy * ox + vy * oy\n}\n\nfunction circleScaledRadius(c: CircleCollider, t: WorldTransform) {\n  const sx = abs(t.scaleX.v), sy = abs(t.scaleY.v)\n  return c.radius * (sx > sy ? sx : sy) // conservative\n}\n\nfunction checkCircleCircleCollision(\n  ca: CircleCollider, ta: WorldTransform, cb: CircleCollider, tb: WorldTransform\n): boolean {\n  circleCenterScratch(ca, ta); const ax = _ccx, ay = _ccy\n  circleCenterScratch(cb, tb); const bx = _ccx, by = _ccy\n  const ra = circleScaledRadius(ca, ta)\n  const rb = circleScaledRadius(cb, tb)\n  const dx = bx - ax, dy = by - ay\n  const r = ra + rb\n  return (dx * dx + dy * dy) <= r * r\n}\n\n// =====================================================================================\n// Rect–Circle (no allocations)\n// =====================================================================================\n\nfunction checkRectCircleCollision(\n  r: RectangleCollider, tr: WorldTransform,\n  c: CircleCollider, tc: WorldTransform\n): boolean {\n  // Rect frame\n  const rsx = tr.scaleX.v, rsy = tr.scaleY.v\n  const rhx = abs(r.width * rsx) * 0.5\n  const rhy = abs(r.height * rsy) * 0.5\n  const rc = tr.rotation.cos, rs = tr.rotation.sin\n  const rux = rc, ruy = rs\n  const rvx = -rs, rvy = rc\n  const rox = (r.x || 0) * rsx\n  const roy = (r.y || 0) * rsy\n  const rcx = tr.x.v + rux * rox + rvx * roy\n  const rcy = tr.y.v + ruy * rox + rvy * roy\n\n  // Circle center + radius (into scratch scalars)\n  circleCenterScratch(c, tc)\n  const rr = circleScaledRadius(c, tc)\n\n  // Project center delta onto rect local axes and clamp\n  const dx = _ccx - rcx, dy = _ccy - rcy\n  const qx = dx * rux + dy * ruy\n  const qy = dx * rvx + dy * rvy\n  const clx = qx < -rhx ? -rhx : (qx > rhx ? rhx : qx)\n  const cly = qy < -rhy ? -rhy : (qy > rhy ? rhy : qy)\n  const ddx = qx - clx\n  const ddy = qy - cly\n  return (ddx * ddx + ddy * ddy) <= rr * rr\n}\n\n// =====================================================================================\n// Polygon helpers — SAT (no allocations; polygons are in WORLD space)\n// =====================================================================================\n\nfunction checkPolyPolyCollision(a: PolygonCollider, b: PolygonCollider): boolean {\n  const av = a.vertices, bv = b.vertices\n  let n = av.length; if (n === 0) return false\n  let m = bv.length; if (m === 0) return false\n\n  // Edges of A\n  for (let i = 0; i < n; i++) {\n    const j = (i + 1) % n\n    const ex = av[j].x - av[i].x\n    const ey = av[j].y - av[i].y\n    const nx = -ey, ny = ex\n\n    let minA = Infinity, maxA = -Infinity\n    for (let k = 0; k < n; k++) {\n      const p = nx * av[k].x + ny * av[k].y\n      if (p < minA) minA = p\n      if (p > maxA) maxA = p\n    }\n    let minB = Infinity, maxB = -Infinity\n    for (let k = 0; k < m; k++) {\n      const p = nx * bv[k].x + ny * bv[k].y\n      if (p < minB) minB = p\n      if (p > maxB) maxB = p\n    }\n    if (maxA < minB || maxB < minA) return false\n  }\n\n  // Edges of B\n  for (let i = 0; i < m; i++) {\n    const j = (i + 1) % m\n    const ex = bv[j].x - bv[i].x\n    const ey = bv[j].y - bv[i].y\n    const nx = -ey, ny = ex\n\n    let minA = Infinity, maxA = -Infinity\n    for (let k = 0; k < n; k++) {\n      const p = nx * av[k].x + ny * av[k].y\n      if (p < minA) minA = p\n      if (p > maxA) maxA = p\n    }\n    let minB = Infinity, maxB = -Infinity\n    for (let k = 0; k < m; k++) {\n      const p = nx * bv[k].x + ny * bv[k].y\n      if (p < minB) minB = p\n      if (p > maxB) maxB = p\n    }\n    if (maxA < minB || maxB < minA) return false\n  }\n\n  return true\n}\n\nfunction checkPolyCircleCollision(poly: PolygonCollider, c: CircleCollider, tc: WorldTransform): boolean {\n  const v = poly.vertices; const n = v.length; if (n === 0) return false\n\n  circleCenterScratch(c, tc)\n  const PCx = _ccx, PCy = _ccy\n  const rr = circleScaledRadius(c, tc)\n\n  // Edge normals\n  for (let i = 0; i < n; i++) {\n    const j = (i + 1) % n\n    const ex = v[j].x - v[i].x\n    const ey = v[j].y - v[i].y\n    const nx = -ey, ny = ex\n    const nlen = Math.hypot(nx, ny)\n\n    let minP = Infinity, maxP = -Infinity\n    for (let k = 0; k < n; k++) {\n      const p = nx * v[k].x + ny * v[k].y\n      if (p < minP) minP = p\n      if (p > maxP) maxP = p\n    }\n    const centerProj = nx * PCx + ny * PCy\n    const minC = centerProj - rr * nlen\n    const maxC = centerProj + rr * nlen\n    if (maxP < minC || maxC < minP) return false\n  }\n\n  // Closest-vertex axis\n  let bestDx = 0, bestDy = 0, bestD2 = Infinity\n  for (let i = 0; i < n; i++) {\n    const dx = PCx - v[i].x\n    const dy = PCy - v[i].y\n    const d2 = dx * dx + dy * dy\n    if (d2 < bestD2) { bestD2 = d2; bestDx = dx; bestDy = dy }\n  }\n  if (bestD2 === 0) return true\n  {\n    const nx = bestDx, ny = bestDy\n    const nlen = Math.hypot(nx, ny)\n\n    let minP = Infinity, maxP = -Infinity\n    for (let i = 0; i < n; i++) {\n      const p = nx * v[i].x + ny * v[i].y\n      if (p < minP) minP = p\n      if (p > maxP) maxP = p\n    }\n    const centerProj = nx * PCx + ny * PCy\n    const minC = centerProj - rr * nlen\n    const maxC = centerProj + rr * nlen\n    if (maxP < minC || maxC < minP) return false\n  }\n\n  return true\n}\n\nfunction checkPolyRectCollision(poly: PolygonCollider, r: RectangleCollider, tr: WorldTransform): boolean {\n  const v = poly.vertices; const n = v.length; if (n === 0) return false\n\n  // Rect frame\n  const rsx = tr.scaleX.v, rsy = tr.scaleY.v\n  const rhx = abs(r.width * rsx) * 0.5\n  const rhy = abs(r.height * rsy) * 0.5\n  const rc = tr.rotation.cos, rs = tr.rotation.sin\n  const rux = rc, ruy = rs\n  const rvx = -rs, rvy = rc\n  const rox = (r.x || 0) * rsx\n  const roy = (r.y || 0) * rsy\n  const rcx = tr.x.v + rux * rox + rvx * roy\n  const rcy = tr.y.v + ruy * rox + rvy * roy\n\n  // A) polygon edge normals\n  for (let i = 0; i < n; i++) {\n    const j = (i + 1) % n\n    const ex = v[j].x - v[i].x\n    const ey = v[j].y - v[i].y\n    const nx = -ey, ny = ex\n\n    let minP = Infinity, maxP = -Infinity\n    for (let k = 0; k < n; k++) {\n      const p = nx * v[k].x + ny * v[k].y\n      if (p < minP) minP = p\n      if (p > maxP) maxP = p\n    }\n\n    const nu = nx * rux + ny * ruy\n    const nv = nx * rvx + ny * rvy\n    const rRad = (rhx * (nu < 0 ? -nu : nu)) + (rhy * (nv < 0 ? -nv : nv))\n    const cProj = nx * rcx + ny * rcy\n    const minR = cProj - rRad\n    const maxR = cProj + rRad\n    if (maxP < minR || maxR < minP) return false\n  }\n\n  // B) rect axis u\n  {\n    const nx = rux, ny = ruy\n    let minP = Infinity, maxP = -Infinity\n    for (let i = 0; i < n; i++) {\n      const p = nx * v[i].x + ny * v[i].y\n      if (p < minP) minP = p\n      if (p > maxP) maxP = p\n    }\n    const cProj = nx * rcx + ny * rcy\n    const minR = cProj - rhx\n    const maxR = cProj + rhx\n    if (maxP < minR || maxR < minP) return false\n  }\n  // C) rect axis v\n  {\n    const nx = rvx, ny = rvy\n    let minP = Infinity, maxP = -Infinity\n    for (let i = 0; i < n; i++) {\n      const p = nx * v[i].x + ny * v[i].y\n      if (p < minP) minP = p\n      if (p > maxP) maxP = p\n    }\n    const cProj = nx * rcx + ny * rcy\n    const minR = cProj - rhy\n    const maxR = cProj + rhy\n    if (maxP < minR || maxR < minP) return false\n  }\n\n  return true\n}\n\n// =====================================================================================\n// GJK (no allocations: global scratch + selectable supports) — FIXED/ROBUST\n// =====================================================================================\n\n// Global scratch for support result\nlet _sx = 0, _sy = 0\n\n// Support selectors\nconst enum SupportType { None = 0, Ellipse = 1, OBB = 2, Circle = 3, Poly = 4 }\nlet _supportAType = SupportType.None\nlet _supportBType = SupportType.None\n\n// A-shape params\nlet _Acx = 0, _Acy = 0, _Aux = 0, _Auy = 0, _Avx = 0, _Avy = 0, _Arx = 0, _Ary = 0, _Ahx = 0, _Ahy = 0, _Arr = 0\nlet _Apoly: { x: number, y: number }[] | null = null\n\n// B-shape params\nlet _Bcx = 0, _Bcy = 0, _Bux = 0, _Buy = 0, _Bvx = 0, _Bvy = 0, _Brx = 0, _Bry = 0, _Bhx = 0, _Bhy = 0, _Brr = 0\nlet _Bpoly: { x: number, y: number }[] | null = null\n\nfunction setSupportCircle(dx: number, dy: number, cx: number, cy: number, r: number) {\n  const len = Math.hypot(dx, dy)\n  if (len === 0) { _sx = cx; _sy = cy; return }\n  const inv = 1 / len\n  _sx = cx + dx * inv * r\n  _sy = cy + dy * inv * r\n}\n\nfunction setSupportOBB(\n  dx: number, dy: number,\n  cx: number, cy: number, ux: number, uy: number, vx: number, vy: number, hx: number, hy: number\n) {\n  const du = dx * ux + dy * uy\n  const dv = dx * vx + dy * vy\n  const sx = du >= 0 ? 1 : -1\n  const sy = dv >= 0 ? 1 : -1\n  _sx = cx + ux * hx * sx + vx * hy * sy\n  _sy = cy + uy * hx * sx + vy * hy * sy\n}\n\nfunction setSupportEllipse(\n  dx: number, dy: number,\n  cx: number, cy: number, ux: number, uy: number, vx: number, vy: number, rx: number, ry: number\n) {\n  const du = dx * ux + dvDy(dy, uy) // small micro-opt helper below\n  const dv = dx * vx + dvDy(dy, vy)\n  const denom = Math.hypot(rx * du, ry * dv)\n  if (denom === 0) { _sx = cx; _sy = cy; return }\n  const kU = (rx * rx * du) / denom\n  const kV = (ry * ry * dv) / denom\n  _sx = cx + kU * ux + kV * vx\n  _sy = cy + kU * uy + kV * vy\n}\n// tiny inline to help inlining without creating temps\nfunction dvDy(dy: number, a: number) { return dy * a }\n\nfunction setSupportPoly(dx: number, dy: number, verts: { x: number, y: number }[]) {\n  let best = 0, bestDot = -Infinity\n  for (let i = 0, n = verts.length; i < n; i++) {\n    const vx = verts[i].x, vy = verts[i].y\n    const d = dx * vx + dy * vy\n    if (d > bestDot) { bestDot = d; best = i }\n  }\n  _sx = verts[best].x\n  _sy = verts[best].y\n}\n\nfunction supportA(dx: number, dy: number) {\n  if (_supportAType === SupportType.Ellipse) setSupportEllipse(dx, dy, _Acx, _Acy, _Aux, _Auy, _Avx, _Avy, _Arx, _Ary)\n  else if (_supportAType === SupportType.OBB) setSupportOBB(dx, dy, _Acx, _Acy, _Aux, _Auy, _Avx, _Avy, _Ahx, _Ahy)\n  else if (_supportAType === SupportType.Circle) setSupportCircle(dx, dy, _Acx, _Acy, _Arr)\n  else if (_supportAType === SupportType.Poly && _Apoly) setSupportPoly(dx, dy, _Apoly)\n  else { _sx = 0; _sy = 0 }\n}\nfunction supportB(dx: number, dy: number) {\n  if (_supportBType === SupportType.Ellipse) setSupportEllipse(dx, dy, _Bcx, _Bcy, _Bux, _Buy, _Bvx, _Bvy, _Brx, _Bry)\n  else if (_supportBType === SupportType.OBB) setSupportOBB(dx, dy, _Bcx, _Bcy, _Bux, _Buy, _Bvx, _Bvy, _Bhx, _Bhy)\n  else if (_supportBType === SupportType.Circle) setSupportCircle(dx, dy, _Bcx, _Bcy, _Brr)\n  else if (_supportBType === SupportType.Poly && _Bpoly) setSupportPoly(dx, dy, _Bpoly)\n  else { _sx = 0; _sy = 0 }\n}\n\n// GJK core — returns true if intersection (robust; no allocations)\nfunction gjkIntersectsNoAlloc(): boolean {\n  // EPS guards degenerate directions/points\n  const EPS = 1e-9\n  const EPS2 = EPS * EPS\n\n  // simplex points (A = most recently added)\n  let ax = 0, ay = 0, bx = 0, by = 0, cx = 0, cy = 0\n  let n = 0\n\n  // search direction\n  let dx = 1, dy = 0\n\n  // Adds a new support point as A and shifts previous (C<-B, B<-A)\n  function addPointAsA() {\n    supportA(dx, dy); const pax = _sx, pay = _sy\n    supportB(-dx, -dy); const pbx = _sx, pby = _sy\n    const px = pax - pbx, py = pay - pby\n    cx = bx; cy = by\n    bx = ax; by = ay\n    ax = px; ay = py\n    if (n < 3) n++\n  }\n\n  addPointAsA()\n  if (ax * ax + ay * ay <= EPS2) return true // origin exactly (or ~) hit\n  dx = -ax; dy = -ay\n\n  for (let iter = 0; iter < 32; iter++) {\n    const dLen2 = dx * dx + dy * dy\n    if (dLen2 <= EPS2) return true // direction collapsed → enclosed\n\n    addPointAsA()\n\n    // If new point A does not pass beyond origin along d, shapes are separated\n    const Ad = ax * dx + ay * dy\n    if (Ad <= 0) return false\n    if (ax * ax + ay * ay <= EPS2) return true\n\n    if (n === 2) {\n      // Segment (B-A). Use triple product to get perpendicular toward origin: d = triple(AB, AO, AB)\n      const abx = bx - ax, aby = by - ay\n      const aox = -ax, aoy = -ay\n      const ac = abx * abx + aby * aby                  // (AB·AB)\n      const bc = aox * abx + aoy * aby                  // (AO·AB)\n      dx = aox * ac - abx * bc                          // AO*(AB·AB) - AB*(AO·AB)\n      dy = aoy * ac - aby * bc\n      continue\n    }\n\n    // Triangle (C-B-A), A is the latest point\n    const abx = bx - ax, aby = by - ay\n    const acx = cx - ax, acy = cy - ay\n    const aox = -ax, aoy = -ay\n\n    // abPerp = triple(AC, AO, AB)\n    const ac_ab = acx * abx + acy * aby                 // (AC·AB)\n    const ao_ab = aox * abx + aoy * aby                 // (AO·AB)\n    let t1x = aox * ac_ab - acx * ao_ab\n    let t1y = aoy * ac_ab - acy * ao_ab\n    if (t1x * aox + t1y * aoy > 0) {\n      // Origin is in the AB region: drop C -> segment(B-A)\n      cx = bx; cy = by; n = 2\n      dx = t1x; dy = t1y\n      continue\n    }\n\n    // acPerp = triple(AB, AO, AC)\n    const ab_ac = abx * acx + aby * acy                 // (AB·AC)\n    const ao_ac = aox * acx + aoy * acy                 // (AO·AC)\n    let t2x = aox * ab_ac - abx * ao_ac\n    let t2y = aoy * ab_ac - aby * ao_ac\n    if (t2x * aox + t2y * aoy > 0) {\n      // Origin is in the AC region: drop B -> segment(C-A)\n      bx = cx; by = cy; n = 2\n      dx = t2x; dy = t2y\n      continue\n    }\n\n    // Origin is inside triangle\n    return true\n  }\n\n  // Conservative fallback\n  return false\n}\n\n// =====================================================================================\n// Ellipse interactions via GJK (no allocations)\n// =====================================================================================\n\nfunction checkEllipseRectCollision(\n  e: EllipseCollider, te: WorldTransform,\n  r: RectangleCollider, tr: WorldTransform\n): boolean {\n  // A = Ellipse\n  const esx = te.scaleX.v, esy = te.scaleY.v\n  _Arx = abs(e.width * esx) * 0.5\n  _Ary = abs(e.height * esy) * 0.5\n  const ecs = te.rotation.cos, esn = te.rotation.sin\n  _Aux = ecs; _Auy = esn; _Avx = -esn; _Avy = ecs\n  const eox = (e.x || 0) * esx, eoy = (e.y || 0) * esy\n  _Acx = te.x.v + _Aux * eox + _Avx * eoy\n  _Acy = te.y.v + _Auy * eox + _Avy * eoy\n  _supportAType = SupportType.Ellipse\n  _Apoly = null\n\n  // B = OBB (rect)\n  const rsx = tr.scaleX.v, rsy = tr.scaleY.v\n  _Bhx = abs(r.width * rsx) * 0.5\n  _Bhy = abs(r.height * rsy) * 0.5\n  const rcs = tr.rotation.cos, rsn = tr.rotation.sin\n  _Bux = rcs; _Buy = rsn; _Bvx = -rsn; _Bvy = rcs\n  const rox = (r.x || 0) * rsx, roy = (r.y || 0) * rsy\n  _Bcx = tr.x.v + _Bux * rox + _Bvx * roy\n  _Bcy = tr.y.v + _Buy * rox + _Bvy * roy\n  _supportBType = SupportType.OBB\n  _Bpoly = null\n\n  return gjkIntersectsNoAlloc()\n}\n\nfunction checkEllipseCircleCollision(\n  e: EllipseCollider, te: WorldTransform,\n  c: CircleCollider, tc: WorldTransform\n): boolean {\n  // A = Ellipse\n  const esx = te.scaleX.v, esy = te.scaleY.v\n  _Arx = abs(e.width * esx) * 0.5\n  _Ary = abs(e.height * esy) * 0.5\n  const ecs = te.rotation.cos, esn = te.rotation.sin\n  _Aux = ecs; _Auy = esn; _Avx = -esn; _Avy = ecs\n  const eox = (e.x || 0) * esx, eoy = (e.y || 0) * esy\n  _Acx = te.x.v + _Aux * eox + _Avx * eoy\n  _Acy = te.y.v + _Auy * eox + _Avy * eoy\n  _supportAType = SupportType.Ellipse\n  _Apoly = null\n\n  // B = Circle\n  circleCenterScratch(c, tc)\n  _Bcx = _ccx; _Bcy = _ccy\n  _Brr = circleScaledRadius(c, tc)\n  _supportBType = SupportType.Circle\n  _Bpoly = null\n\n  return gjkIntersectsNoAlloc()\n}\n\nfunction checkEllipseEllipseCollision(\n  a: EllipseCollider, ta: WorldTransform,\n  b: EllipseCollider, tb: WorldTransform\n): boolean {\n  // A\n  const asx = ta.scaleX.v, asy = ta.scaleY.v\n  _Arx = abs(a.width * asx) * 0.5\n  _Ary = abs(a.height * asy) * 0.5\n  const acs = ta.rotation.cos, asn = ta.rotation.sin\n  _Aux = acs; _Auy = asn; _Avx = -asn; _Avy = acs\n  const aox = (a.x || 0) * asx, aoy = (a.y || 0) * asy\n  _Acx = ta.x.v + _Aux * aox + _Avx * aoy\n  _Acy = ta.y.v + _Auy * aox + _Avy * aoy\n  _supportAType = SupportType.Ellipse\n  _Apoly = null\n\n  // B\n  const bsx = tb.scaleX.v, bsy = tb.scaleY.v\n  _Brx = abs(b.width * bsx) * 0.5\n  _Bry = abs(b.height * bsy) * 0.5\n  const bcs = tb.rotation.cos, bsn = tb.rotation.sin\n  _Bux = bcs; _Buy = bsn; _Bvx = -bsn; _Bvy = bcs\n  const box = (b.x || 0) * bsx, boy = (b.y || 0) * bsy\n  _Bcx = tb.x.v + _Bux * box + _Bvx * boy\n  _Bcy = tb.y.v + _Buy * box + _Bvy * boy\n  _supportBType = SupportType.Ellipse\n  _Bpoly = null\n\n  return gjkIntersectsNoAlloc()\n}\n\nfunction checkPolyEllipseCollision(poly: PolygonCollider, e: EllipseCollider, te: WorldTransform): boolean {\n  // A = Poly\n  _Apoly = poly.vertices\n  _supportAType = SupportType.Poly\n\n  // B = Ellipse\n  const esx = te.scaleX.v, esy = te.scaleY.v\n  _Brx = abs(e.width * esx) * 0.5\n  _Bry = abs(e.height * esy) * 0.5\n  const ecs = te.rotation.cos, esn = te.rotation.sin\n  _Bux = ecs; _Buy = esn; _Bvx = -esn; _Bvy = ecs\n  const eox = (e.x || 0) * esx, eoy = (e.y || 0) * esy\n  _Bcx = te.x.v + _Bux * eox + _Bvx * eoy\n  _Bcy = te.y.v + _Buy * eox + _Bvy * eoy\n  _supportBType = SupportType.Ellipse\n  _Bpoly = null\n\n  return gjkIntersectsNoAlloc()\n}\n\n// =====================================================================================\n// Dispatcher (no allocations)\n// =====================================================================================\n\nexport function checkCollision(ca: Collider, ta: WorldTransform, cb: Collider, tb: WorldTransform): boolean {\n  // Rectangle–Rectangle\n  if (ca.type === ColliderType.Rectangle && cb.type === ColliderType.Rectangle)\n    return checkRectRectCollision(ca, ta, cb, tb)\n\n  // Circle–Circle\n  if (ca.type === ColliderType.Circle && cb.type === ColliderType.Circle)\n    return checkCircleCircleCollision(ca, ta, cb, tb)\n\n  // Rect–Circle (both orders)\n  if (ca.type === ColliderType.Rectangle && cb.type === ColliderType.Circle)\n    return checkRectCircleCollision(ca, ta, cb, tb)\n  if (ca.type === ColliderType.Circle && cb.type === ColliderType.Rectangle)\n    return checkRectCircleCollision(cb, tb, ca, ta)\n\n  // Polygon–Polygon\n  if (ca.type === ColliderType.Polygon && cb.type === ColliderType.Polygon)\n    return checkPolyPolyCollision(ca, cb)\n\n  // Polygon–Circle (both orders)\n  if (ca.type === ColliderType.Polygon && cb.type === ColliderType.Circle)\n    return checkPolyCircleCollision(ca, cb, tb)\n  if (ca.type === ColliderType.Circle && cb.type === ColliderType.Polygon)\n    return checkPolyCircleCollision(cb, ca, ta)\n\n  // Polygon–Rect (both orders)\n  if (ca.type === ColliderType.Polygon && cb.type === ColliderType.Rectangle)\n    return checkPolyRectCollision(ca, cb, tb)\n  if (ca.type === ColliderType.Rectangle && cb.type === ColliderType.Polygon)\n    return checkPolyRectCollision(cb, ca, ta)\n\n  // Ellipse interactions via GJK\n  if (ca.type === ColliderType.Ellipse && cb.type === ColliderType.Rectangle)\n    return checkEllipseRectCollision(ca, ta, cb, tb)\n  if (ca.type === ColliderType.Rectangle && cb.type === ColliderType.Ellipse)\n    return checkEllipseRectCollision(cb, tb, ca, ta)\n\n  if (ca.type === ColliderType.Ellipse && cb.type === ColliderType.Circle)\n    return checkEllipseCircleCollision(ca, ta, cb, tb)\n  if (ca.type === ColliderType.Circle && cb.type === ColliderType.Ellipse)\n    return checkEllipseCircleCollision(cb, tb, ca, ta)\n\n  if (ca.type === ColliderType.Ellipse && cb.type === ColliderType.Ellipse)\n    return checkEllipseEllipseCollision(ca, ta, cb, tb)\n\n  if (ca.type === ColliderType.Polygon && cb.type === ColliderType.Ellipse)\n    return checkPolyEllipseCollision(ca, cb, tb)\n  if (ca.type === ColliderType.Ellipse && cb.type === ColliderType.Polygon)\n    return checkPolyEllipseCollision(cb, ca, ta)\n\n  return false\n}\n"]}