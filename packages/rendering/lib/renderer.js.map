{"version":3,"file":"renderer.js","sourceRoot":"","sources":["../src/renderer.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,kBAAkB,EAAE,SAAS,EAAE,UAAU,EAAqC,gBAAgB,EAAE,MAAM,SAAS,CAAA;AAExH,MAAM,OAAO,QAAQ;IACV,OAAO,CAAS;IAChB,gBAAgB,CAAiB;IAEjC,KAAK,GAAG,IAAI,SAAS,EAAE,CAAA;IAChC,aAAa,CAAe;IAE5B,YACE,MAAe,EACf,eAAgC;QAEhC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAA;QACrB,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAA;QACvC,IAAI,CAAC,KAAK,EAAE,CAAA;IACd,CAAC;IAED,KAAK,CAAC,KAAK;QACT,IAAI,CAAC,aAAa,GAAG,MAAM,kBAAkB,CAAC;YAC5C,MAAM,EAAE,IAAI,CAAC,OAAO;SACrB,CAAC,CAAA;IACJ,CAAC;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;YACvB,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE;gBAClC,MAAM;YACR,CAAC,CAAC,CAAA;YACF,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;QACvC,CAAC;IACH,CAAC;CACF;AAED,MAAM,OAAO,iBAAkB,SAAQ,QAAQ;IAC7C,YAAY,MAAe,EAAE,eAAgC;QAC3D,UAAU,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAA;QAChC,KAAK,CAAC,MAAM,EAAE,eAAe,CAAC,CAAA;IAChC,CAAC;CACF","sourcesContent":["import { ObjectStateTree } from '@kiwiengine/core'\nimport { autoDetectRenderer, Container, DOMAdapter, ICanvas, Renderer as PixiRenderer, WebWorkerAdapter } from 'pixi.js'\n\nexport class Renderer {\n  readonly #canvas: ICanvas\n  readonly #objectStateTree: ObjectStateTree\n\n  readonly #root = new Container()\n  #pixiRenderer?: PixiRenderer\n\n  constructor(\n    canvas: ICanvas,\n    objectStateTree: ObjectStateTree,\n  ) {\n    this.#canvas = canvas\n    this.#objectStateTree = objectStateTree\n    this.#init()\n  }\n\n  async #init() {\n    this.#pixiRenderer = await autoDetectRenderer({\n      canvas: this.#canvas,\n    })\n  }\n\n  render() {\n    if (this.#pixiRenderer) {\n      this.#objectStateTree.forEach((i) => {\n        //TODO\n      })\n      this.#pixiRenderer.render(this.#root)\n    }\n  }\n}\n\nexport class WebWorkerRenderer extends Renderer {\n  constructor(canvas: ICanvas, objectStateTree: ObjectStateTree) {\n    DOMAdapter.set(WebWorkerAdapter)\n    super(canvas, objectStateTree)\n  }\n}"]}